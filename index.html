<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>The Brain Rot Corner â€” Multi Video</title>
<style>
  html,body{height:100%}
  body{margin:0;background:transparent;pointer-events:none;
       font:14px/1.4 system-ui,Segoe UI,Roboto,Arial,sans-serif}
  .corner{
    position:fixed; right:12px; bottom:12px; z-index:99999;
    width:520px; aspect-ratio:16/9;
    border:1px solid rgba(255,255,255,.08); border-radius:12px; overflow:hidden;
    background:#0d1220cc; box-shadow:0 10px 24px rgba(0,0,0,.45);
    display:flex; flex-direction:column; resize:both; pointer-events:auto;
  }
  .bar{display:flex;align-items:center;gap:8px;background:rgba(19,22,32,.95);
       padding:6px 8px;font-weight:600;font-size:12px;cursor:move;color:#e6edf3}
  .title{flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .btn,.sel,.fld{border:1px solid rgba(255,255,255,.08);background:#191e2bcc;color:#e6edf3;
       border-radius:6px;padding:4px 6px;font-size:12px}
  .btn{cursor:pointer}
  .btn:hover{background:#202637}
  .sel{cursor:pointer}
  .fld{width:220px}
  .frame{flex:1;position:relative;background:black}
  video{position:absolute;inset:0;width:100%;height:100%;border:0;display:block;object-fit:cover}
  .row{display:flex;align-items:center;gap:6px}
  @media (max-width:640px){
    .fld{display:none}
  }
</style>
</head>
<body>
  <div class="corner" id="corner">
    <div class="bar" id="drag">
      <span class="title">ðŸ§  The Brain Rot Corner</span>
      <select id="videoSelect" class="sel" title="Choose a loop"></select>
      <input id="customUrl" class="fld" placeholder="Paste .mp4 URL">
      <button class="btn" id="addBtn" title="Add custom URL">Add</button>
      <button class="btn" id="muteBtn">Unmute</button>
      <button class="btn" id="closeBtn">Close</button>
    </div>
    <div class="frame">
      <video id="mp4" playsinline muted autoplay loop></video>
    </div>
  </div>

<script>
(function(){
  const corner = document.getElementById('corner');
  const drag = document.getElementById('drag');
  const mp4 = document.getElementById('mp4');
  const muteBtn = document.getElementById('muteBtn');
  const closeBtn = document.getElementById('closeBtn');
  const videoSelect = document.getElementById('videoSelect');
  const customUrl = document.getElementById('customUrl');
  const addBtn = document.getElementById('addBtn');

  // Default playlist (replace with your own .mp4 links)
  const defaults = [
    { label: "Subway Surfers (Releases)", src: "https://github.com/UneOrangeux/brainrotmaxxing/releases/latest/download/brainrot.mp4" },
    { label: "Minecraft Parkour (sample)", src: "https://files.catbox.moe/9i5x6t.mp4" },
    { label: "Oddly Satisfying (sample)", src: "https://files.catbox.moe/t0l0o7.mp4" },
    { label: "Street Skating (sample)", src: "https://files.catbox.moe/0xq2mx.mp4" }
  ];

  function loadList(){
    const raw = localStorage.getItem("brainrot_list");
    if(!raw){
      localStorage.setItem("brainrot_list", JSON.stringify(defaults));
      return defaults.slice();
    }
    try{ const arr = JSON.parse(raw); if(Array.isArray(arr) && arr.length) return arr; }catch(e){}
    return defaults.slice();
  }
  function saveList(list){ localStorage.setItem("brainrot_list", JSON.stringify(list)); }

  let list = loadList();

  function renderOptions(){
    videoSelect.innerHTML = list.map((it,i)=>`<option value="${i}">${it.label}</option>`).join("");
  }

  function setSource(src){
    mp4.src = src;
    mp4.play().catch(()=>{});
    localStorage.setItem("brainrot_src", src);
  }

  renderOptions();
  const savedSrc = localStorage.getItem("brainrot_src");
  const idx = savedSrc ? list.findIndex(x=>x.src===savedSrc) : -1;
  if(idx>=0){ videoSelect.value = String(idx); setSource(savedSrc); }
  else { videoSelect.value = "0"; setSource(list[0].src); }

  videoSelect.addEventListener("change", ()=>{
    const i = parseInt(videoSelect.value,10);
    if(list[i]) setSource(list[i].src);
  });

  addBtn.addEventListener("click", ()=>{
    const url = (customUrl.value||"").trim();
    if(!url || !/^https?:\\/\\/.+\\.mp4(\\?.*)?$/i.test(url)){ alert("Please paste a valid .mp4 URL"); return; }
    const label = prompt("Name this video:", "Custom clip");
    if(label===null) return;
    list.push({ label: label||"Custom", src: url });
    saveList(list);
    renderOptions();
    videoSelect.value = String(list.length-1);
    setSource(url);
    customUrl.value = "";
  });

  // Drag window
  let dragging=false,sx=0,sy=0,ox=0,oy=0;
  drag.addEventListener("mousedown", e=>{
    dragging=true; sx=e.clientX; sy=e.clientY;
    const r=corner.getBoundingClientRect(); ox=r.left; oy=r.top; e.preventDefault();
  });
  window.addEventListener("mousemove", e=>{
    if(!dragging) return;
    const dx=e.clientX-sx, dy=e.clientY-sy;
    corner.style.left=(ox+dx)+"px"; corner.style.top=(oy+dy)+"px";
    corner.style.right="auto"; corner.style.bottom="auto";
  });
  window.addEventListener("mouseup", ()=> dragging=false);

  // Mute toggle
  let muted=true;
  function sync(){ mp4.muted=muted; muteBtn.textContent=muted?"Unmute":"Mute"; if(!muted) mp4.play().catch(()=>{}); }
  muteBtn.addEventListener("click", ()=>{ muted=!muted; sync(); });
  sync();

  closeBtn.addEventListener("click", ()=> corner.remove());
})();
</script>
</body>
</html>
